{"version":3,"sources":["./src/app/pages/topics/topics.page.html","./src/app/pages/topics/topics.module.ts","./src/app/pages/topics/topics.page.ts","./src/app/pages/topics/topics-routing.module.ts","./src/app/pages/topics/topics.page.scss"],"names":[],"mappings":"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","file":"pages-topics-topics-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>{{topic.title}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <h5 style=\\\"margin-left: 10px\\\">Created by: {{userPost.nome}}</h5>\\n  <div *ngFor=\\\"let c of comments\\\">\\n    <ng-container *ngIf=\\\"c.idtopic == topic.topicId\\\">\\n  <ion-card>\\n    <ion-card-header>\\n      <ion-card-subtitle>\\n      </ion-card-subtitle>\\n      <ion-card-title></ion-card-title>\\n    </ion-card-header>\\n    <ion-card-content>\\n      {{c.comment}}\\n    </ion-card-content>\\n  </ion-card>\\n</ng-container>\\n</div>\\n  <ion-item>\\n    <form (ngSubmit)=\\\"comentar(form)\\\" #form=\\\"ngForm\\\">\\n    <ion-textarea type=\\\"text\\\" name=\\\"comment.comment\\\" [(ngModel)]=comment.comment required autoGrow=true maxlength=\\\"200\\\"></ion-textarea>\\n    <ion-button type=\\\"submit\\\">Comentar</ion-button>\\n  </form>\\n  </ion-item>\\n \\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TopicsPageRoutingModule } from './topics-routing.module';\n\nimport { TopicsPage } from './topics.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TopicsPageRoutingModule\n  ],\n  declarations: [TopicsPage]\n})\nexport class TopicsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { User } from 'src/app/models/user'\nimport { Topic } from 'src/app/models/topic';\nimport { Comments } from 'src/app/models/comments';\nimport { LoadingsService } from 'src/app/services/loadings.service';\nimport { ContentService } from 'src/app/services/content.service';\nimport { UserService } from 'src/app/services/user.service'\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-topics',\n  templateUrl: './topics.page.html',\n  styleUrls: ['./topics.page.scss'],\n})\nexport class TopicsPage implements OnInit {\n  private subscription5: Subscription;\n  public id: string = null;\n  public id2: string = null;\n  public id3: string = null;\n  public currentUser: User = new User();\n  public userPost: User = new User();\n  public topic: Topic = new Topic();\n  public comment: Comments = new Comments();\n  public comments: Comments[] = [];\n  public usersName: User[] = [];\n\n  constructor(\n    private contentService: ContentService,\n    private activatedRoute: ActivatedRoute,\n    private router:Router,\n    private msg:LoadingsService,\n    private userService: UserService,\n  ) { }\n\n  async ngOnInit() {\n   await this.getCommentsByid();\n   await this.getAllUsers();\n   await this.verfUser();\n    this.id = this.activatedRoute.snapshot.paramMap.get(\"id\");\n    if(this.id){\n    await  this.getTopicInfo();\n    } else {\n       this.router.navigate([\"/about\"]);\n      };\n      \n  }\n  ionViewWillEnter() {\n    this.verfUser();\n  }\n  ionViewWillLeave() {\n    this.currentUser = null;\n    this.id3 = null;\n    this.id2 = null;\n    this.id = null;\n   }\n  async verfUser() {\n    await this.userService.auth.user.subscribe(\n      res => {\n        this.id3 = res.uid;\n        if (res)\n          this.userService.get(res.uid).subscribe(\n            res => {\n              this.currentUser = res;\n            } \n          )\n      },\n      err => {\n        this.currentUser = null\n      }\n    )\n  }\n  // async getComments() {\n  //   if (!this.id)\n  //     return;\n  //   if (this.subscription5 && !this.subscription5.closed)\n  //     this.subscription5.unsubscribe();\n  //   this.subscription5 = this.contentService.getAllFromComments(this.topic.topicId).subscribe(ans => {\n  //     this.comments = ans;\n  //     this.comments.forEach(value => {\n  //       var subscription = this.userService.get(value.idUser).subscribe(ans2 => {\n  //         value.user = ans2;\n  //         subscription.unsubscribe();\n  //       })\n  //     })\n  //   })\n  // }\nasync getCommentsByid(){\n  await  this.contentService.getComments().subscribe(\n      resultado => {\n        this.comments = resultado;\n      }\n    )  \n  }\n  async getAllUsers(){\n    await  this.userService.getAll().subscribe(\n        result => {\n          this.usersName = result;\n          console.log(result);\n        }\n      )  \n    }\n  // filterComents(test: string){\n  //   test = this.id;\n  //   Array.filter\n  //   this.comments2.filter(comments2 => this.comments. == test)\n  //   )\n  // }\n async getTopicInfo(){\n    await this.contentService.get(this.id).subscribe(\n   async resul => {\n        this.topic = resul;\n        this.topic.topicId = this.id;\n        this.id2 = resul.idUser;\n      await  this.userService.get(this.id2).subscribe(\n          res => {\n            this.userPost = res;\n      });\n          }\n        );\n        this.msg.dismissLoading();\n      }\n      comentar(form) {\n        if (form.valid) {\n          this.msg.presentLoading()\n          this.comment.idUser = this.id3;\n          this.comment.idtopic = this.id;\n          console.log(this.comment);\n            this.contentService.addComment(this.comment).then(\n              res => {\n                form.reset();\n                this.msg.presentAlert(\"\", \"Comentário enviado\");\n                this.msg.dismissLoading();\n                this.router.navigate([\"/topics/\", this.id]);\n              },\n              err => {\n                this.msg.dismissLoading();\n                this.msg.presentAlert(\"Erro:\", \"Não foi possivel comentar\");\n              }\n            ).finally(\n              ()=> this.msg.dismissLoading()\n            )\n          }\n        }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TopicsPage } from './topics.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TopicsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TopicsPageRoutingModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ0b3BpY3MucGFnZS5zY3NzIn0= */\";"],"sourceRoot":"webpack:///"}