{"version":3,"sources":["./src/app/pages/perfil/perfil.page.html","./src/app/pages/perfil/perfil.page.ts","./src/app/pages/perfil/perfil-routing.module.ts","./src/app/pages/perfil/perfil.page.scss","./src/app/pages/perfil/perfil.module.ts"],"names":[],"mappings":"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","file":"pages-perfil-perfil-module.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Perfil\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n\\n  <!-- <ion-item lines=\\\"none\\\" *ngIf=\\\"usuario.foto\\\">\\n    <img [src]=\\\"preview\\\" (click)=\\\"alterarFoto()\\\" *ngIf=\\\"preview\\\">\\n    <img src=\\\"assets/perfil.png\\\" (click)=\\\"alterarFoto()\\\" *ngIf=\\\"!preview\\\">\\n  </ion-item>\\n\\n  <ion-item lines=\\\"none\\\" *ngIf=\\\"!usuario.foto\\\">\\n    <img [src]=\\\"preview\\\" (click)=\\\"alterarFoto()\\\" *ngIf=\\\"preview\\\">\\n    <img src=\\\"assets/perfil.png\\\" (click)=\\\"alterarFoto()\\\" *ngIf=\\\"!preview\\\">\\n  </ion-item> -->\\n\\n  <ion-list>\\n    <ion-item>\\n      <ion-label>Nome</ion-label>\\n    <ion-text>{{user.nome}}</ion-text>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Novo Nome</ion-label>\\n            <ion-input type=\\\"text\\\" name=\\\"upName\\\" [(ngModel)]=\\\"upName\\\" required\\n               #username=\\\"ngModel\\\"></ion-input>\\n          <ion-button color=\\\"warning\\\" (click)=\\\"changeName()\\\" [disabled]=\\\"(!username.value)\\\">Mudar Nome</ion-button>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>E-mail</ion-label>\\n      <ion-text>{{user.email}}</ion-text>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Novo E-mail</ion-label>\\n            <ion-input type=\\\"email\\\" name=\\\"updateemail\\\" [(ngModel)]=\\\"updateemail\\\" required\\n              pattern=\\\"[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,}$\\\" #useremail=\\\"ngModel\\\"></ion-input>\\n          <ion-button color=\\\"warning\\\" (click)=\\\"changeEmail()\\\" [disabled]=\\\"useremail.invalid || (!useremail.value)\\\">Mudar E-mail</ion-button>\\n    </ion-item>\\n  </ion-list>\\n  <!-- <ion-list style=\\\"margin-top: 20px\\\">\\n      <ion-item>\\n        <ion-button color=\\\"warning\\\"  (click)=\\\"ChangePass()\\\">Mudar Senha</ion-button>\\n      </ion-item>\\n  </ion-list> -->\\n  <ion-list>\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Nova Senha</ion-label>\\n            <ion-input type=\\\"password\\\" name=\\\"upPassword\\\" [(ngModel)]=\\\"upPassword\\\" required\\n              #userpass=\\\"ngModel\\\"></ion-input>\\n          <ion-button color=\\\"warning\\\" (click)=\\\"ChangePass()\\\" [disabled]=\\\"(!userpass.value)\\\">Alterar Senha</ion-button>\\n    </ion-item>\\n  </ion-list>\\n \\n</ion-content>\\n\";","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ActionSheetController } from '@ionic/angular';\nimport { User } from 'src/app/models/user';\nimport { LoadingsService } from 'src/app/services/loadings.service';\nimport { UserService } from 'src/app/services/user.service';\nimport { AppComponent } from 'src/app/app.component';\n@Component({\n  selector: 'app-perfil',\n  templateUrl: './perfil.page.html',\n  styleUrls: ['./perfil.page.scss'],\n})\nexport class PerfilPage implements OnInit {\n   public id: string = null;\n   public user: User = new User;\n   public userUpdate: User = new User;\n   public updateemail: string = null;\n   public upPassword: string = null;\n   public upName: string = null;\n  // public preview: string = null;\n\n  constructor(\n    private userService: UserService,\n    private router:Router,\n    private msg:LoadingsService,\n    private appConf: AppComponent\n  ) { }\n\n  \n  async ngOnInit() {\n   // await this.verfUser();\n  }\n\n  ionViewWillEnter() {\n    this.verfUser()\n  }\n  async verfUser() {\n    await this.userService.auth.user.subscribe(\n      res => {\n        if (res)\n        this.id = res.uid;\n          this.userService.get(res.uid).subscribe(\n            res => {\n              this.user = res;\n            }\n          )\n      },\n      err => {\n        this.user = null\n      }\n    )\n  }\n\n  async changeEmail(){\n    this.msg.presentLoading(); \n    this.userUpdate.email = this.updateemail; \n    this.userUpdate.nome = this.user.nome; \n    this.userUpdate.id = this.id;\n  await  this.userService.auth.currentUser.then(ans => {ans.updateEmail(this.updateemail)}) \n    await this.userService.updateEmail(this.userUpdate)\n    this.updateemail = null;\n    this.msg.presentAlert(\"Aviso\", \"E-mail atualizado, realize Login novamente para continuar\");\n     this.appConf.logout() \n    }\n\n    async changeName(){\n      this.msg.presentLoading(); \n      this.userUpdate.email = this.user.email; \n      this.userUpdate.nome = this.upName;\n      this.userUpdate.id = this.id; \n      await this.userService.updateName(this.userUpdate)\n      this.upName = null;\n      this.msg.presentAlert(\"Aviso\", \"nome alterado com sucesso\");\n      this.router.navigate([\"/\"]);\n      }\n\n\n     async ChangePass(){\n      this.userService.auth.currentUser.then(ans => {ans.updatePassword(this.upPassword)\n        if(ans != null){\n          this.msg.presentAlert(\"Atenção\", \"Senha Alterada com sucesso, efetue login novamente!\");\n          this.upPassword = null;\n          this.appConf.logout()\n        } else {\n          this.msg.presentAlert(\"Erro\", \"Não foi possivel alterar a senha\");\n        }\n      },\n    );       \n        }\n  \n  // async ProfileUser() {\n  //  this.id =(await this.userService.auth.currentUser).uid;\n  //   if (this.id) {\n  //     this.userService.get(this.id).subscribe(\n  //       res => {\n  //         this.user = res\n  //       }\n  //     )\n    //}} else {\n    //   (await this.userService.auth.currentUser).uid\n    //   await this.userService.auth.user.subscribe(\n    //     res => {\n    //       this.id = res.uid\n    //       this.userService.get(this.id).subscribe(\n    //         res => {\n    //           this.user = res\n    //         }\n    //         )\n    //       }\n    //       )\n    //     }\n    //   }\n\n      // tirarFoto() {\n      //   const options: CameraOptions = {\n      //     quality: 50,\n      //     destinationType: this.camera.DestinationType.DATA_URL,\n      //     encodingType: this.camera.EncodingType.JPEG,\n      //     mediaType: this.camera.MediaType.PICTURE\n      //   }\n    \n      //   this.camera.getPicture(options).then(\n      //     (imageData) => {\n      //       // imageData is either a base64 encoded string or a file URI\n      //       // If it's base64 (DATA_URL):\n      //       this.preview = 'data:image/jpeg;base64,' + imageData;\n      //       this.user.= this.preview;\n      //       //console.log(this.usuario.foto);\n      //       this.msg.presentLoading();\n      //       this.userService.updatePhoto(this.id, this.user.foto).then(\n      //         () => {\n      //           this.msg.dismissLoading()\n      //         }\n      //       )\n      //     }, (err) => {\n      //       // Handle error\n      //       console.log(\"Camera issue: \" + err);\n      //     }\n      //   );\n      // }\n      // escolherFoto(){\n      //   const options: CameraOptions = {\n      //     quality: 50,\n      //     destinationType: this.camera.DestinationType.FILE_URI,\n      //     encodingType: this.camera.EncodingType.JPEG,\n      //     mediaType: this.camera.MediaType.PICTURE,\n      //     sourceType: this.camera.PictureSourceType.PHOTOLIBRARY\n      //   }\n    \n      //   this.camera.getPicture(options).then(\n      //     (imageData) => {\n      //       // imageData is either a base64 encoded string or a file URI\n      //       // If it's base64 (DATA_URL):\n      //       this.preview = 'data:image/jpeg;base64,' + imageData;\n      //       this.usuario.foto = this.preview;\n      //       //console.log(this.usuario.foto);\n      //       this.msg.presentLoading();\n      //       this.usuarioService.updatePhoto(this.id, this.usuario.foto).then(\n      //         () => {\n      //           this.msg.dismissLoading()\n      //         }\n      //       )\n      //     }, (err) => {\n      //       // Handle error\n      //       console.log(\"Camera issue: \" + err);\n      //     }\n      //   );\n      // }\n      // async alterarFoto() {\n      //   const actionSheet = await this.actionSheetController.create({\n      //     header: 'Escolha a origem da imagem.',\n      //     cssClass: 'my-custom-class',\n      //     buttons: [{\n      //       text: 'Camera',\n      //       icon: 'camera',\n      //       handler: () => {\n      //        this.tirarFoto()\n      //       }\n      //     }, {\n      //       text: 'Galeria',\n      //       icon: 'image',\n      //       handler: () => {\n      //         this.escolherFoto()\n      //       }\n      //     }, {\n      //       text: 'Cancelar',\n      //       icon: 'close',\n      //       role: 'cancel',\n      //       handler: () => {\n      //         console.log('Cancel clicked');\n      //       }\n      //     }]\n      //   });\n      //   await actionSheet.present();\n      // }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PerfilPage } from './perfil.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PerfilPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PerfilPageRoutingModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwZXJmaWwucGFnZS5zY3NzIn0= */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PerfilPageRoutingModule } from './perfil-routing.module';\n\nimport { PerfilPage } from './perfil.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PerfilPageRoutingModule\n  ],\n  declarations: [PerfilPage]\n})\nexport class PerfilPageModule {}\n"],"sourceRoot":"webpack:///"}